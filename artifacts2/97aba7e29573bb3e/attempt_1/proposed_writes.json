{
  "summary": "Added deterministic unit tests for the maze solver, including path validity checks (endpoints, adjacency, passage legality), determinism, and success across multiple maze sizes.",
  "writes": [
    {
      "base_sha256": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
      "content": "import pytest\n\nfrom mazegen.generate import generate\nfrom mazegen.solve import solve\nfrom mazegen.types import Maze, Position, Solution\n\n\ndef _edge(a: Position, b: Position):\n    return (a, b) if a <= b else (b, a)\n\n\ndef _assert_valid_solution(maze: Maze, sol: Solution) -> None:\n    assert isinstance(sol, Solution)\n    assert sol.found is True\n    assert len(sol.path) >= 1\n\n    # (2) path starts at maze.start and ends at maze.end\n    assert sol.path[0] == maze.start\n    assert sol.path[-1] == maze.end\n\n    # (3) every consecutive pair in the path is adjacent (Manhattan distance == 1)\n    # (4) every consecutive pair corresponds to a passage in maze.passages\n    for a, b in zip(sol.path, sol.path[1:]):\n        manhattan = abs(a.row - b.row) + abs(a.col - b.col)\n        assert manhattan == 1\n        assert _edge(a, b) in maze.passages\n\n\ndef test_solve_generated_perfect_maze_found_and_valid_path() -> None:\n    # (1) solve returns Solution with found=True for a generated perfect maze\n    maze = generate(width=5, height=5, seed=123)\n    sol = solve(maze)\n    _assert_valid_solution(maze, sol)\n\n\ndef test_solve_is_deterministic_on_same_maze() -> None:\n    # (5) determinism: solving the same maze twice produces the same path\n    maze = generate(width=7, height=7, seed=999)\n    sol1 = solve(maze)\n    sol2 = solve(maze)\n\n    assert sol1.found is True\n    assert sol2.found is True\n    assert sol1.path == sol2.path\n\n\n@pytest.mark.parametrize(\n    \"width,height,seed\",\n    [\n        (3, 3, 0),\n        (5, 5, 1),\n        (10, 10, 2),\n    ],\n)\ndef test_solve_multiple_sizes_succeed(width: int, height: int, seed: int) -> None:\n    # (6) solve on multiple maze sizes all succeed\n    maze = generate(width=width, height=height, seed=seed)\n    sol = solve(maze)\n    _assert_valid_solution(maze, sol)\n",
      "path": "tests/test_solve.py"
    }
  ]
}
