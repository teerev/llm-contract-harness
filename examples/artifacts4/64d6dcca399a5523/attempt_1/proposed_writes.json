{
  "summary": "Added worldsim/render_ascii.py implementing a pure deterministic ASCII renderer for WorldState grids with specified character mapping and no external dependencies.",
  "writes": [
    {
      "base_sha256": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
      "content": "from __future__ import annotations\n\nfrom .types import WorldState\n\n\ndef render_ascii(state: WorldState) -> str:\n    \"\"\"Render a WorldState grid to a deterministic ASCII representation.\n\n    Each cell is exactly one character. Rows are separated by '\\n' with no\n    trailing newline.\n\n    Mapping:\n      - '.' for empty cells\n      - '@' for agents with energy > 5\n      - 'o' for agents with energy 1 to 5 inclusive\n      - 'x' for agents with energy <= 0\n    \"\"\"\n\n    # Initialize grid with empty cells.\n    grid = [['.' for _ in range(state.width)] for _ in range(state.height)]\n\n    # Agents are sorted by Position for determinism; we simply place them.\n    for pos, agent in state.agents:\n        if agent.energy > 5:\n            ch = '@'\n        elif agent.energy >= 1:\n            ch = 'o'\n        else:\n            ch = 'x'\n\n        # Assume positions are within bounds; if not, ignore out-of-bounds.\n        if 0 <= pos.row < state.height and 0 <= pos.col < state.width:\n            grid[pos.row][pos.col] = ch\n\n    return \"\\n\".join(\"\".join(row) for row in grid)\n",
      "path": "worldsim/render_ascii.py"
    }
  ]
}
