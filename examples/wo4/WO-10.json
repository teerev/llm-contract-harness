{
  "id": "WO-10",
  "title": "Wire CLI to full simulation pipeline",
  "intent": "Edit worldsim/cli.py to add all arguments and wire them through world, rules, stats, render, checkpoint, and HTML modules to provide headless, ASCII, and HTML output modes.",
  "allowed_files": [
    "worldsim/cli.py",
    "worldsim/types.py",
    "worldsim/world.py",
    "worldsim/rules.py",
    "worldsim/stats.py",
    "worldsim/render_ascii.py",
    "worldsim/render_html.py",
    "worldsim/checkpoint.py"
  ],
  "forbidden": [
    "Do not modify worldsim/types.py",
    "Do not modify worldsim/world.py",
    "Do not modify worldsim/rules.py",
    "Do not modify worldsim/stats.py",
    "Do not modify worldsim/render_ascii.py",
    "Do not modify worldsim/render_html.py",
    "Do not modify worldsim/checkpoint.py"
  ],
  "acceptance_commands": [
    "python -m worldsim --width 8 --height 8 --seed 42 --steps 5",
    "python -m worldsim --width 6 --height 6 --seed 42 --steps 3 --render ascii",
    "python -c \"import subprocess; r = subprocess.run(['python', '-m', 'worldsim', '--width', '5', '--height', '5', '--seed', '42', '--steps', '3'], capture_output=True, text=True); assert r.returncode == 0; assert 'step_number' in r.stdout or 'population' in r.stdout, 'expected CSV metrics on stdout'\""
  ],
  "context_files": [
    "worldsim/cli.py",
    "worldsim/types.py",
    "worldsim/world.py",
    "worldsim/rules.py",
    "worldsim/stats.py",
    "worldsim/render_ascii.py",
    "worldsim/render_html.py",
    "worldsim/checkpoint.py"
  ],
  "notes": "Edit ONLY worldsim/cli.py. Read ALL other context files to learn exact function signatures.\n\nKeep the existing --version flag. Add required arguments: --width (int), --height (int), --seed (int), --steps (int). Add optional: --density (float, default 0.3), --initial-energy (int, default 10), --energy-gain (int, default 2), --move-cost (int, default 1), --reproduction-threshold (int, default 15), --reproduction-cost (int, default 8), --max-age (int, default 50), --render (str, choices=['none','ascii','html'], default 'none'), --html-output (str, default 'simulation.html' — path for HTML output), --checkpoint-out (str, optional — save final state), --checkpoint-in (str, optional — load initial state).\n\nIn main(): if --version, print and return 0. Build SimConfig from args. If --checkpoint-in, load_checkpoint and create World from loaded state + config; else create_world(config). Create StatsCollector. If --render html, collect states list = [world.get_state()]. Loop --steps times: call world.step(), record with stats. If --render ascii: print render_ascii(step_result.world) then print a blank line. If --render html: append step_result.world to states list. After loop: if --render none or ascii: print stats.to_csv() to stdout. If --render html: call render_html(states, html_output_path) and print path to stdout. If --checkpoint-out: save_checkpoint(world.get_state(), path). Return 0.\n\nAll other files are context-only — do NOT modify them."
}
