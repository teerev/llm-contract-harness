{
  "id": "WO-07",
  "title": "Implement ASCII grid renderer",
  "intent": "Create worldsim/render_ascii.py with a pure function that converts a WorldState into a deterministic ASCII string representation of the grid.",
  "allowed_files": [
    "worldsim/render_ascii.py",
    "worldsim/types.py"
  ],
  "forbidden": [
    "Do not modify worldsim/types.py",
    "Do not modify any other existing files",
    "Do not import any external dependencies"
  ],
  "acceptance_commands": [
    "python -c \"from worldsim.render_ascii import render_ascii; from worldsim.types import WorldState, Position, Agent; ws = WorldState(width=3, height=3, step_number=0, seed=1, agents=((Position(0,0), Agent(10,0,0)), (Position(1,1), Agent(3,2,1)))); s = render_ascii(ws); lines = s.strip().split(chr(10)); assert len(lines) == 3 and len(lines[0]) == 3; assert lines[0][0] == '@' and lines[1][1] == 'o' and lines[2][2] == '.'\"",
    "python -c \"from worldsim.render_ascii import render_ascii; from worldsim.types import WorldState; ws = WorldState(4, 4, 0, 1, ()); s1 = render_ascii(ws); s2 = render_ascii(ws); assert s1 == s2, 'not deterministic'; assert s1.count('.') == 16\""
  ],
  "context_files": [
    "worldsim/render_ascii.py",
    "worldsim/types.py"
  ],
  "notes": "Define: render_ascii(state: WorldState) -> str.\n\nRender the grid as a height-row string where each cell is exactly one character. Rows separated by newline. No trailing newline.\n\nCharacter mapping:\n- '.' for empty cells\n- '@' for agents with energy > 5\n- 'o' for agents with energy 1 to 5 inclusive\n- 'x' for agents with energy <= 0\n\nExample for 3x3 grid with agents at (0,0) energy=10 and (1,1) energy=3:\n@..\n.o.\n...\n\nThe function must be pure, deterministic, and use no external dependencies. Do NOT modify worldsim/types.py."
}
