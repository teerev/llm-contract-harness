{
  "summary": "Added command-line arguments to lsysviz/cli.py to wire the CLI to the expand-turtle-render pipeline, enabling PNG generation from L-system parameters.",
  "writes": [
    {
      "base_sha256": "4e766a6ec14429cfa57589e4f9e585c1570464e59526c9dcaffe9d8dd9de3b73",
      "content": "import argparse\nfrom . import __version__\nfrom .expand import expand\nfrom .turtle import interpret\nfrom .render import render_to_png\nfrom .types import Grammar\n\n\ndef build_parser():\n    parser = argparse.ArgumentParser(description='L-system Visualizer')\n    parser.add_argument('--version', action='store_true', help='Show version information')\n    parser.add_argument('--axiom', type=str, required=True, help='The axiom of the L-system')\n    parser.add_argument('--rule', type=str, action='append', required=True, help=\"Production rules in the format 'SYMBOL=REPLACEMENT'\")\n    parser.add_argument('--iterations', type=int, required=True, help='Number of iterations to expand the L-system')\n    parser.add_argument('--angle', type=float, required=True, help='Turning angle in degrees')\n    parser.add_argument('--step', type=float, required=True, help='Step length for each forward move')\n    parser.add_argument('--output', type=str, required=True, help='Output PNG file path')\n    parser.add_argument('--width', type=int, default=800, help='Width of the output image')\n    parser.add_argument('--height', type=int, default=600, help='Height of the output image')\n    return parser\n\n\ndef main(argv=None):\n    parser = build_parser()\n    args = parser.parse_args(argv)\n\n    if args.version:\n        print(__version__)\n        return 0\n\n    # Parse rules into a dictionary\n    rules = {}\n    for rule in args.rule:\n        symbol, replacement = rule.split('=', 1)\n        rules[symbol] = replacement\n\n    # Construct the Grammar\n    grammar = Grammar(axiom=args.axiom, rules=rules)\n\n    # Expand the L-system\n    lstring = expand(grammar, args.iterations)\n\n    # Interpret the expanded string into segments\n    segments = interpret(lstring, args.angle, args.step)\n\n    # Render the segments to a PNG file\n    render_to_png(segments, args.width, args.height, args.output)\n\n    return 0\n",
      "path": "lsysviz/cli.py"
    }
  ]
}
