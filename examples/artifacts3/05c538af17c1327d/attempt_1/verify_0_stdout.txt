.........F                                                               [100%]
=================================== FAILURES ===================================
__ test_age_monotonicity_agent_ages_only_increase_across_steps_for_survivors ___

    def test_age_monotonicity_agent_ages_only_increase_across_steps_for_survivors():
        config = SimConfig(width=13, height=9, seed=77, initial_density=0.4)
        world = create_world(config)
    
        prev = world.get_state()
        for _ in range(10):
            result = world.step()
            curr = result.world
    
            prev_map = _agents_by_pos(prev)
            curr_map = _agents_by_pos(curr)
    
            # For agents that remain in the same cell across steps, age must increase.
            # (Movement can change positions; births introduce new agents with age=0.)
            for pos, prev_agent in prev_map.items():
                if pos in curr_map:
>                   assert curr_map[pos].age > prev_agent.age
E                   assert 0 > 4
E                    +  where 0 = Agent(energy=8, age=0, direction=1).age
E                    +  and   4 = Agent(energy=14, age=4, direction=2).age

tests/test_simulation.py:129: AssertionError
=========================== short test summary info ============================
FAILED tests/test_simulation.py::test_age_monotonicity_agent_ages_only_increase_across_steps_for_survivors
1 failed, 9 passed in 0.44s
