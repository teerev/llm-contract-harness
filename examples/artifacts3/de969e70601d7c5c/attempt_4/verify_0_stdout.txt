.........F                                                               [100%]
=================================== FAILURES ===================================
______ test_age_monotonicity_ages_only_increase_for_survivors_by_position ______

    def test_age_monotonicity_ages_only_increase_for_survivors_by_position():
        # Because agents move, we can only compare ages for agents that remain at the
        # same position across steps (i.e., survivors at identical Position).
        config = SimConfig(width=14, height=9, seed=31415, initial_density=0.5)
        world = create_world(config)
    
        for _ in range(10):
            before = world.get_state()
            before_agents = _agents_dict(before)
            res = world.step()
            after_agents = _agents_dict(res.world)
    
            common_positions = set(before_agents.keys()) & set(after_agents.keys())
            for pos in common_positions:
>               assert after_agents[pos].age == before_agents[pos].age + 1
E               assert 0 == (4 + 1)
E                +  where 0 = Agent(energy=8, age=0, direction=0).age
E                +  and   4 = Agent(energy=14, age=4, direction=0).age

tests/test_simulation.py:134: AssertionError
=========================== short test summary info ============================
FAILED tests/test_simulation.py::test_age_monotonicity_ages_only_increase_for_survivors_by_position
1 failed, 9 passed in 0.47s
