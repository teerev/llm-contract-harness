{
  "id": "WO-08",
  "title": "Add expansion tests and enable pytest in verification",
  "intent": "Create tests/test_expand.py with deterministic unit tests for the expand function, and update scripts/verify.sh to also run pytest.",
  "allowed_files": [
    "tests/test_expand.py",
    "scripts/verify.sh"
  ],
  "forbidden": [
    "Do not modify any lsysviz/ files",
    "Do not create any files other than tests/test_expand.py"
  ],
  "acceptance_commands": [
    "python -m pytest tests/test_expand.py -q"
  ],
  "context_files": [
    "tests/test_expand.py",
    "scripts/verify.sh"
  ],
  "notes": "tests/test_expand.py must import expand from lsysviz.expand and Grammar from lsysviz.types. Include at least these test cases: (1) expand with 0 iterations returns axiom unchanged, (2) Fibonacci L-system: Grammar(axiom='A', rules={'A':'AB','B':'A'}) at iterations 1 gives 'AB', iterations 2 gives 'ABA', iterations 3 gives 'ABAAB', (3) characters not in rules are preserved (e.g. Grammar(axiom='F+F', rules={'F':'FF'}) at iteration 1 gives 'FF+FF'), (4) empty rules dict leaves axiom unchanged. Update scripts/verify.sh to append 'python -m pytest -q' as the last line (keep the existing compileall line)."
}
