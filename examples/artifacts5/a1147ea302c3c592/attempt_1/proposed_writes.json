{
  "summary": "Added worldsim/render_ascii.py implementing a pure deterministic ASCII renderer for WorldState grids with specified energy-to-character mapping.",
  "writes": [
    {
      "base_sha256": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
      "content": "from __future__ import annotations\n\nfrom .types import WorldState\n\n\ndef render_ascii(state: WorldState) -> str:\n    \"\"\"Render a WorldState as a deterministic ASCII grid.\n\n    Produces `height` rows of `width` characters, separated by '\\n' with no\n    trailing newline.\n\n    Character mapping by agent energy:\n      - '.' empty\n      - '@' energy > 5\n      - 'o' energy 1-5\n      - 'x' energy <= 0\n\n    If multiple agents occupy the same cell (unexpected), the last one in\n    `state.agents` wins; `state.agents` is expected to be sorted by Position.\n    \"\"\"\n\n    width = state.width\n    height = state.height\n\n    grid = [['.' for _ in range(width)] for _ in range(height)]\n\n    for pos, agent in state.agents:\n        r, c = pos.row, pos.col\n        if 0 <= r < height and 0 <= c < width:\n            e = agent.energy\n            if e > 5:\n                ch = '@'\n            elif e > 0:\n                ch = 'o'\n            else:\n                ch = 'x'\n            grid[r][c] = ch\n\n    return \"\\n\".join(\"\".join(row) for row in grid)\n",
      "path": "worldsim/render_ascii.py"
    }
  ]
}
