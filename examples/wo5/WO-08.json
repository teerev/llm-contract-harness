{
  "id": "WO-08",
  "title": "Implement ASCII grid renderer",
  "intent": "Create worldsim/render_ascii.py with a pure function that converts a WorldState into a deterministic ASCII string representation of the grid.",
  "allowed_files": [
    "worldsim/render_ascii.py",
    "worldsim/types.py"
  ],
  "forbidden": [
    "Do not modify worldsim/types.py",
    "Do not modify any other existing files"
  ],
  "acceptance_commands": [
    "python -c \"from worldsim.render_ascii import render_ascii; from worldsim.types import WorldState, Position, Agent; ws = WorldState(width=3, height=3, step_number=0, seed=1, agents=((Position(0,0), Agent(10,0,0)), (Position(1,1), Agent(3,2,1)))); s = render_ascii(ws); lines = s.strip().split(chr(10)); assert len(lines) == 3 and len(lines[0]) == 3; assert lines[0][0] == '@' and lines[1][1] == 'o' and lines[2][2] == '.'\"",
    "python -c \"from worldsim.render_ascii import render_ascii; from worldsim.types import WorldState; ws = WorldState(4, 4, 0, 1, ()); s1 = render_ascii(ws); s2 = render_ascii(ws); assert s1 == s2 and s1.count('.') == 16\""
  ],
  "context_files": [
    "worldsim/render_ascii.py",
    "worldsim/types.py"
  ],
  "notes": "Define: render_ascii(state: WorldState) -> str. Render grid as height rows, each width characters. Rows separated by newline. No trailing newline. Character mapping: '.' empty, '@' energy > 5, 'o' energy 1-5, 'x' energy <= 0. Pure, deterministic, no external deps. Do NOT modify worldsim/types.py."
}
