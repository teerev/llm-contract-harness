{
  "id": "WO-11",
  "title": "Wire CLI to full simulation pipeline",
  "intent": "Edit worldsim/cli.py to add all arguments and wire them through world, rules, stats, render, checkpoint, and HTML modules to provide headless, ASCII, and HTML output modes.",
  "allowed_files": [
    "worldsim/cli.py",
    "worldsim/types.py",
    "worldsim/world.py",
    "worldsim/rules.py",
    "worldsim/stats.py",
    "worldsim/render_ascii.py",
    "worldsim/render_html.py",
    "worldsim/checkpoint.py"
  ],
  "forbidden": [
    "Do not modify any file except worldsim/cli.py"
  ],
  "acceptance_commands": [
    "python -m worldsim --width 8 --height 8 --seed 42 --steps 5",
    "python -m worldsim --width 6 --height 6 --seed 42 --steps 3 --render ascii",
    "python -c \"import subprocess; r = subprocess.run(['python', '-m', 'worldsim', '--width', '5', '--height', '5', '--seed', '42', '--steps', '3'], capture_output=True, text=True); assert r.returncode == 0; assert 'step_number' in r.stdout or 'population' in r.stdout, 'expected CSV metrics'\""
  ],
  "context_files": [
    "worldsim/cli.py",
    "worldsim/types.py",
    "worldsim/world.py",
    "worldsim/rules.py",
    "worldsim/stats.py",
    "worldsim/render_ascii.py",
    "worldsim/render_html.py",
    "worldsim/checkpoint.py"
  ],
  "notes": "Edit ONLY worldsim/cli.py. Read ALL other context files for exact signatures.\n\nKeep --version. Add required: --width (int), --height (int), --seed (int), --steps (int). Add optional: --density (float, default 0.3), --initial-energy (int, default 10), --energy-gain (int, default 2), --move-cost (int, default 1), --reproduction-threshold (int, default 15), --reproduction-cost (int, default 8), --max-age (int, default 50), --render (choices=['none','ascii','html'], default 'none'), --html-output (str, default 'simulation.html'), --checkpoint-out (str, optional), --checkpoint-in (str, optional).\n\nIn main(): if --version, print and return 0. Build SimConfig from args. If --checkpoint-in, load_checkpoint + create World from loaded state; else create_world(config). Create StatsCollector. If --render html, init states=[world.get_state()]. Loop --steps: step(), record stats. If ascii: print render_ascii + blank line. If html: append state. After loop: if none/ascii: print to_csv(). If html: render_html(states, html_output_path), print path. If --checkpoint-out: save_checkpoint. Return 0.\n\nDo NOT modify any other files."
}
