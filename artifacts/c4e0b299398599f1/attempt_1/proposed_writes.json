{
  "summary": "Added deterministic unit tests for lsysviz.turtle.interpret covering basic forward moves, turns, push/pop behavior, and ignoring unknown characters.",
  "writes": [
    {
      "base_sha256": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
      "content": "import pytest\n\nfrom lsysviz.turtle import interpret\nfrom lsysviz.types import Segment\n\n\ndef _assert_point(p, x, y, tol=1e-9):\n    assert p[0] == pytest.approx(x, abs=tol)\n    assert p[1] == pytest.approx(y, abs=tol)\n\n\ndef _assert_segment(seg, x1, y1, x2, y2, tol=1e-9):\n    assert isinstance(seg, Segment)\n    _assert_point(seg.start, x1, y1, tol=tol)\n    _assert_point(seg.end, x2, y2, tol=tol)\n\n\ndef test_single_F_angle_90_step_10_produces_one_segment_up():\n    segs = interpret(\"F\", angle=90, step=10)\n    assert len(segs) == 1\n    _assert_segment(segs[0], 0.0, 0.0, 0.0, 10.0)\n\n\ndef test_FF_produces_two_segments():\n    segs = interpret(\"FF\", angle=90, step=10)\n    assert len(segs) == 2\n    _assert_segment(segs[0], 0.0, 0.0, 0.0, 10.0)\n    _assert_segment(segs[1], 0.0, 10.0, 0.0, 20.0)\n\n\ndef test_F_plus_F_angle_90_second_segment_goes_left():\n    segs = interpret(\"F+F\", angle=90, step=10)\n    assert len(segs) == 2\n    _assert_segment(segs[0], 0.0, 0.0, 0.0, 10.0)\n    # After '+', heading turns left from up to left\n    _assert_segment(segs[1], 0.0, 10.0, -10.0, 10.0)\n\n\ndef test_F_minus_F_angle_90_second_segment_goes_right():\n    segs = interpret(\"F-F\", angle=90, step=10)\n    assert len(segs) == 2\n    _assert_segment(segs[0], 0.0, 0.0, 0.0, 10.0)\n    # After '-', heading turns right from up to right\n    _assert_segment(segs[1], 0.0, 10.0, 10.0, 10.0)\n\n\ndef test_push_pop_F_bracket_plus_F_bracket_minus_F_third_starts_after_first():\n    segs = interpret(\"F[+F]-F\", angle=90, step=10)\n    assert len(segs) == 3\n\n    # First forward\n    _assert_segment(segs[0], 0.0, 0.0, 0.0, 10.0)\n\n    # Branch: turn left and forward from the pushed state\n    _assert_segment(segs[1], 0.0, 10.0, -10.0, 10.0)\n\n    # After pop, we are back at end of first segment, then '-' turns right and forward\n    _assert_segment(segs[2], 0.0, 10.0, 10.0, 10.0)\n\n\ndef test_unknown_characters_are_ignored_FXF_produces_two_segments():\n    segs = interpret(\"FXF\", angle=90, step=10)\n    assert len(segs) == 2\n    _assert_segment(segs[0], 0.0, 0.0, 0.0, 10.0)\n    _assert_segment(segs[1], 0.0, 10.0, 0.0, 20.0)\n",
      "path": "tests/test_turtle.py"
    }
  ]
}
