{
  "id": "WO-08",
  "title": "WO-08: Raster v1 (buffer + axis-aligned lines)",
  "intent": "Create a minimal deterministic rasterizer that draws axis-aligned line segments into an RGBA pixel buffer.",
  "allowed_files": [
    "lsysviz/raster.py"
  ],
  "forbidden": [
    "Do not modify files outside allowed_files.",
    "Do not add new dependencies.",
    "Do not implement diagonal/general line drawing in this step (axis-aligned only; defer to WO-09).",
    "Do not implement PNG encoding, render pipeline wiring, or CLI changes in this step.",
    "Keep lsysviz/raster.py small (aim for <= 200 lines)."
  ],
  "acceptance_commands": [
    "bash scripts/verify.sh",
    "python -c \"from lsysviz.raster import new_rgba, draw_segments; img=new_rgba(8,8,(255,255,255,255)); draw_segments(img,8,8,[((0,0),(7,0))],(0,0,0,255)); assert len(img)==8*8*4\""
  ],
  "context_files": [],
  "notes": "Type: additive-feature. Contracts (frozen): raster buffer is a flat RGBA bytearray of length width*height*4. Define and freeze the function signatures: new_rgba(width:int,height:int,bg_rgba:(int,int,int,int))->bytearray and draw_segments(buf, width, height, segments, line_rgba). In this step, only axis-aligned segments are supported (horizontal/vertical); raise a clear error for diagonal segments (to be implemented in WO-09). All behavior must be deterministic."
}

