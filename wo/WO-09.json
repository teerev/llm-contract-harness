{
  "id": "WO-09",
  "title": "WO-09: Raster v2 (general line drawing)",
  "intent": "Extend the rasterizer to support deterministic drawing of diagonal/general line segments.",
  "allowed_files": [
    "lsysviz/raster.py"
  ],
  "forbidden": [
    "Do not modify files outside allowed_files.",
    "Do not add new dependencies.",
    "Do not implement PNG encoding, render pipeline wiring, or CLI changes in this step.",
    "Keep the diff small and incremental relative to WO-08 (do not rewrite the whole file)."
  ],
  "acceptance_commands": [
    "bash scripts/verify.sh",
    "python -c \"from lsysviz.raster import new_rgba, draw_segments; img=new_rgba(8,8,(255,255,255,255)); draw_segments(img,8,8,[((0,0),(7,7))],(0,0,0,255)); assert len(img)==8*8*4\""
  ],
  "context_files": [
    "lsysviz/raster.py"
  ],
  "notes": "Type: additive-feature. Contracts (preserved): keep the v1 public function signatures and buffer format unchanged. Add deterministic general line drawing for any integer endpoints (e.g. Bresenham). Ensure axis-aligned behavior remains identical. Compositionality: this is a monotone extension of the rasterizer that unlocks non-orthogonal L-systems without changing earlier contracts."
}

